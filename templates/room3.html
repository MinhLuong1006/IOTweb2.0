<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room 3</title>
</head>
<body>
    <h1>Room 3</h1>
    <div class="building-box"> 
        <a href="{{url_for('building2')}}" class="slider-link"><b>Back to B2</b></a>
    </div>
    <div class="building-box"> 
        <a href="{{url_for('dashboard')}}" class="slider-link"><b>Back to Dashboard</b></a>
    </div>



    <div class="data-item">
        <h2>Temperature</h2>
        <p class="value" id="temp3">Loading...</p>
    </div>

    <div class="data-item">
        <h2>Smoke</h2>
        <p class="value" id="smoke3">Loading...</p>
    </div>

    <div class="data-item">
        <h2>Flame</h2>
        <p class="value" id="flame3">Loading...</p>
    </div>

    <a href="{{url_for('home')}}">Log out</a>

    <!-- Load Firebase Data -->
    
    <script type="text/javascript" src="{{ url_for('static', filename='scripts/dashboard.js') }}" defer></script>

    <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
            import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyB-ENheeyuJs8GFQVzFNq1silxSIQk8TbM",
        authDomain: "esp32-fire-alarm-a8fc5.firebaseapp.com",
        databaseURL: "https://esp32-fire-alarm-a8fc5-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "esp32-fire-alarm-a8fc5",
        storageBucket: "esp32-fire-alarm-a8fc5.firebasestorage.app",
        messagingSenderId: "138078759671",
        appId: "1:138078759671:web:06b4af915ffd11839681f2",
        measurementId: "G-ZZW6Q5DB2S"
      };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const tempRef = ref(db, "b2/r3/temp3");
    const smokeRef = ref(db, "b2/r3/smoke3");
    const flameRef = ref(db, "b2/r3/flame3");
   
        onValue(tempRef, (snapshot) => {
            document.getElementById("temp3").innerHTML = snapshot.val() + "Â°C";
        });

        onValue(smokeRef, (snapshot) => {
            document.getElementById("smoke3").innerHTML = snapshot.val();
        });

        onValue(flameRef, (snapshot) => {
            document.getElementById("flame3").innerHTML = snapshot.val();
        });
    </script>
</body>
</html>